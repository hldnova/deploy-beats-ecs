---

- name: remove metricbeat containers on ECS nodes
  hosts: metricbeat
  gather_facts: no
  user: "{{ ECS.ssh_user }}"
  become: true
  become_user: root

  tasks:
    - name: remove metricbeat container
      command: docker rm -f "{{ metricbeat.container_name }}"
      ignore_errors: yes
      tags: metricbeat

- name: remove filebeat containers on ECS nodes
  hosts: metricbeat
  gather_facts: no
  user: "{{ ECS.ssh_user }}"
  become: true
  become_user: root

  tasks:
    - name: remove filebeat container
      command: docker rm -f "{{ filebeat.container_name }}"
      ignore_errors: yes
      tags: filebeat

- name: remove ecsbeat containers
  hosts: ecsbeat
  gather_facts: no
  user: "{{ ECS.ssh_user }}"
  become: true
  become_user: root

  tasks:
    - name: remove ecsbeat container
      command: docker rm -f "{{ ecsbeat.container_name }}"
      ignore_errors: yes
      tags: ecsbeat
